parameters:
    ezdesign.themes_list: []
    ezdesign.design_list: []
    ezdesign.templates_path_map: {}
    ezdesign.assets_path_map: {}
    ezdesign.templates_override_paths: []
    ezdesign.assets_override_paths: []
    ezdesign.asset_resolved_paths: {}
    ezdesign.asset_resolution.disabled: '%kernel.debug%'

services:
    Ibexa\DesignEngine\Templating\ThemeTemplateNameResolver:
        class: Ibexa\DesignEngine\Templating\ThemeTemplateNameResolver
        arguments: ['@ibexa.config.resolver']

    Ibexa\DesignEngine\Templating\TemplatePathRegistry:
        class: Ibexa\DesignEngine\Templating\TemplatePathRegistry
        arguments: ["%kernel.project_dir%"]

    Ibexa\DesignEngine\Templating\Twig\TwigThemeLoader:
        class: Ibexa\DesignEngine\Templating\Twig\TwigThemeLoader
        public: false
        decorates: twig.loader.native_filesystem
        arguments:
            - '@Ibexa\DesignEngine\Templating\ThemeTemplateNameResolver'
            - '@Ibexa\DesignEngine\Templating\TemplatePathRegistry'
            - '@Ibexa\DesignEngine\Templating\Twig\TwigThemeLoader.inner'

    Ibexa\DesignEngine\Asset\AssetPathResolver:
        class: Ibexa\DesignEngine\Asset\AssetPathResolver
        arguments:
            - "%ezdesign.assets_path_map%"
            - "%webroot_dir%"
        public: false

    Ibexa\DesignEngine\Asset\ProvisionedPathResolver:
        class: Ibexa\DesignEngine\Asset\ProvisionedPathResolver
        arguments:
            - '%ezdesign.asset_resolved_paths%'
            - '@Ibexa\DesignEngine\Asset\AssetPathResolver'
            - '%webroot_dir%'
        public: false

    ibexadesign.asset_path_resolver:
        alias: Ibexa\DesignEngine\Asset\AssetPathResolver

    Ibexa\DesignEngine\Asset\ThemePackage:
        class: Ibexa\DesignEngine\Asset\ThemePackage
        arguments:
            - '@ibexadesign.asset_path_resolver'
            - "@assets._default_package"
        calls:
            - [setConfigResolver, ['@ibexa.config.resolver']]
